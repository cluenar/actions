name: CI

on: push

concurrency: ci-${{ github.sha }}

jobs:
  check-suitability:
    name: Check suitability
    runs-on: ubuntu-latest
    steps:
      - name: Check CI suitability
        uses: cluenar/actions/check-ci-suitability@main
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

  install:
    name: Install dependencies
    runs-on: ubuntu-latest
    needs: check-suitability
    steps:
      - name: Install
        uses: cluenar/actions/install@main

  lint:
    name: Lint files
    runs-on: ubuntu-latest
    needs: install
    steps:
      - name: Install
        uses: cluenar/actions/install@main
      - name: Lint files
        run: npm run lint all
        env:
          CI: true
